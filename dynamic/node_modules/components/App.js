import React         from "react"
import moviesStore   from "stores/movies"
import Movies        from "./Movies"
import MoviesInWords from "./MoviesInWords"

export default React.createClass({
  displayName: "App",

  getInitialState() { return {
    mylist: moviesStore.getMyList(),
    recommendations: moviesStore.getRecommendations()
  }},

  componentWillMount() {
    moviesStore.sub(this.update)
  },

  componentWillUnmount() {
    moviesStore.unsub(this.update)
  },

  update() {
    this.setState(this.getInitialState())
  },

  render() {
    let {mylist, recommendations} = this.state;

    return  <div className="App">
              <Movies title="My List" movies={mylist}/>
              <Movies title="Recommendations" movies={recommendations}/>
              <MoviesInWords title="My list titles" movies={mylist}/>
            </div>
  }
})
